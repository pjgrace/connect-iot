<?xml version="1.0"?>
<pattern xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation ="Pattern.xsd">
    
    <architecture>
        <component>
            <id>GoogleOAUTHService</id>
            <address>www.google.com</address>
            <interface>
                <id>idm</id>
                <url>https://foursquare.com:443</url>
            </interface>
        </component>
        <component>
            <id>idm_client</id>
            <address>192.9.206.71</address>
            <interface>
                <id>idm</id>
                <url>http://192.9.206.71:81/login</url>
            </interface>
        </component>
    </architecture>
    
    <behaviour>
        <state>
          <label>A1</label>
          <type>start</type>
          <transition>    
                <to>A2</to>
                <guards>
                    <equal>
                        <param>HTTP.from</param>
                        <value>component.idm_client.address</value>
                    </equal>
                    <equal>
                        <param>HTTP.to</param>
                        <value>component.idmGE.address</value>
                    </equal>
                    <equal>
                        <param>HTTP.toInterface</param>
                        <value>component.idmGE.idm</value>
                    </equal>
                    <equal>
                        <param>HTTP.msg</param>
                        <value>GET</value>
                    </equal>
                </guards>
              </transition>
        </state>
        <state>
          <label>A2</label>
          <type>normal</type>
            <transition>    
                <to>A3</to>
                <guards>
                    <equal>
                        <param>HTTP.to</param>
                        <value>component.idm_client.address</value>
                    </equal>
                    <equal>
                        <param>HTTP.msg</param>
                        <value>REPLY</value>
                    </equal>
                    <equal>
                        <param>HTTP.code</param>
                        <value>400</value>
                    </equal>
                </guards>
              </transition>
        </state>
        <state>
          <label>A3</label>
          <type>normal</type>
            <transition>    
                <to>A4</to>
                <guards>
                    <equal>
                        <param>HTTP.to</param>
                        <value>component.idm_client.address</value>
                    </equal>
                    <equal>
                        <param>HTTP.msg</param>
                        <value>GET</value>
                    </equal>
                </guards>
              </transition>
        </state>
        <state>
          <label>A4</label>
          <type>end</type>
        </state>
    </behaviour>
</pattern>
